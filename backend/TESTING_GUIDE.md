# ν†µν•© ν…μ¤νΈ κ°€μ΄λ“

μ΄ κ°€μ΄λ“λ” λΈ”λ΅μ²΄μΈ ν‹°μΌ“ν… μ‹μ¤ν…μ ν†µν•© ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•λ” λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤.

## μ‚¬μ „ μ¤€λΉ„μ‚¬ν•­

### 1. Hardhat λ΅μ»¬ λ…Έλ“ μ‹¤ν–‰

ν„°λ―Έλ„ 1μ—μ„ Hardhat λ΅μ»¬ λ…Έλ“λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤:

```bash
cd contracts
npx hardhat node
```

λ…Έλ“κ°€ μ‹¤ν–‰λλ©΄ κΈ°λ³Έ κ³„μ •λ“¤μ΄ μƒμ„±λ©λ‹λ‹¤. μ²« λ²μ§Έ κ³„μ •μ΄ μ„λΉ„μ¤ κ³„μ •μΌλ΅ μ‚¬μ©λ©λ‹λ‹¤.

### 2. μ»¨νΈλ™νΈ λ°°ν¬

ν„°λ―Έλ„ 2μ—μ„ μ»¨νΈλ™νΈλ¥Ό λ°°ν¬ν•©λ‹λ‹¤:

```bash
cd contracts
npx hardhat run scripts/deploy.js --network localhost
```

λ°°ν¬κ°€ μ™„λ£λλ©΄ μ»¨νΈλ™νΈ μ£Όμ†κ°€ μ¶λ ¥λ©λ‹λ‹¤. μ΄ μ£Όμ†λ“¤μ„ `backend/.env` νμΌμ— μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

### 3. μ„λΉ„μ¤ κ³„μ • κ¶ν• λ¶€μ—¬

μ„λΉ„μ¤ κ³„μ •(μ²« λ²μ§Έ κ³„μ •)μ— ORGANIZER_ROLEκ³Ό ADMIN_ROLEμ„ λ¶€μ—¬ν•©λ‹λ‹¤:

```bash
cd contracts
npx hardhat run scripts/grant_roles.js --network localhost
```

### 4. λ°±μ—”λ“ μ„λ²„ μ‹¤ν–‰

ν„°λ―Έλ„ 3μ—μ„ λ°±μ—”λ“ μ„λ²„λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤:

```bash
cd backend
source venv/bin/activate
uvicorn main:app --reload --host 127.0.0.1 --port 8000
```

μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λλ©΄ `http://localhost:8000/health`μ—μ„ `{"status":"healthy"}` μ‘λ‹µμ„ λ°›μ„ μ μμµλ‹λ‹¤.

## ν…μ¤νΈ μ‹¤ν–‰

### ν†µν•© ν…μ¤νΈ μ‹¤ν–‰

ν„°λ―Έλ„ 4μ—μ„ ν†µν•© ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤:

```bash
cd backend
source venv/bin/activate
python test_integration.py
```

### ν…μ¤νΈ λ‚΄μ©

ν†µν•© ν…μ¤νΈλ” λ‹¤μ μ‹λ‚λ¦¬μ¤λ¥Ό ν…μ¤νΈν•©λ‹λ‹¤:

1. **μ‚¬μ©μ λ“±λ΅**: μƒλ΅μ΄ μ‚¬μ©μ κ³„μ • μƒμ„±
2. **μ‚¬μ©μ λ΅κ·ΈμΈ**: JWT ν† ν° λ°κΈ‰
3. **μ΄λ²¤νΈ μƒμ„±**: μ¨μ²΄μΈμ— μ΄λ²¤νΈ μƒμ„±
4. **μ΄λ²¤νΈ μΉμΈ**: κ΄€λ¦¬μκ°€ μ΄λ²¤νΈ μΉμΈ
5. **ν‹°μΌ“ κµ¬λ§¤**: μ‚¬μ©μκ°€ ν‹°μΌ“ κµ¬λ§¤ (μ¨μ²΄μΈ)
6. **μ¬νλ§¤ λ“±λ΅**: ν‹°μΌ“μ„ μ¬νλ§¤ λ§μΌ“ν”λ μ΄μ¤μ— λ“±λ΅
7. **μ¬νλ§¤ κµ¬λ§¤**: λ‹¤λ¥Έ μ‚¬μ©μκ°€ μ¬νλ§¤ ν‹°μΌ“ κµ¬λ§¤
8. **ν™λ¶ μ”μ²­**: ν‹°μΌ“ ν™λ¶ μ”μ²­
9. **ν™λ¶ μΉμΈ**: μ£Όμµμκ°€ ν™λ¶ μΉμΈ λ° μ²λ¦¬

### ν…μ¤νΈ κ²°κ³Ό ν™•μΈ

ν…μ¤νΈκ°€ μ™„λ£λλ©΄ λ‹¤μκ³Ό κ°™μ€ κ²°κ³Όκ°€ μ¶λ ¥λ©λ‹λ‹¤:

```
============================================================
ν…μ¤νΈ κ²°κ³Ό μ”μ•½
============================================================
β… ν†µκ³Ό - μ‚¬μ©μ λ“±λ΅
β… ν†µκ³Ό - μ‚¬μ©μ λ΅κ·ΈμΈ
β… ν†µκ³Ό - μ΄λ²¤νΈ μƒμ„±
β… ν†µκ³Ό - μ΄λ²¤νΈ μΉμΈ
β… ν†µκ³Ό - ν‹°μΌ“ κµ¬λ§¤
β… ν†µκ³Ό - μ¬νλ§¤ λ“±λ΅
β… ν†µκ³Ό - μ¬νλ§¤ κµ¬λ§¤
β… ν†µκ³Ό - ν™λ¶ μ”μ²­
β… ν†µκ³Ό - ν™λ¶ μΉμΈ

μ΄ 9/9 ν…μ¤νΈ ν†µκ³Ό
π‰ λ¨λ“  ν…μ¤νΈ ν†µκ³Ό!
```

## λ¬Έμ  ν•΄κ²°

### ν¬νΈκ°€ μ΄λ―Έ μ‚¬μ© μ¤‘μΈ κ²½μ°

```bash
# ν¬νΈ 8000 μ‚¬μ© μ¤‘μΈ ν”„λ΅μ„Έμ¤ μΆ…λ£
lsof -ti:8000 | xargs kill -9

# ν¬νΈ 8545 μ‚¬μ© μ¤‘μΈ ν”„λ΅μ„Έμ¤ μΆ…λ£ (Hardhat)
lsof -ti:8545 | xargs kill -9
```

### μ»¨νΈλ™νΈ μ¬λ°°ν¬κ°€ ν•„μ”ν• κ²½μ°

Hardhat λ…Έλ“λ¥Ό μ¬μ‹μ‘ν•λ©΄ μ»¨νΈλ™νΈκ°€ μ‚­μ λλ―€λ΅ λ‹¤μ‹ λ°°ν¬ν•΄μ•Ό ν•©λ‹λ‹¤:

```bash
cd contracts
npx hardhat run scripts/deploy.js --network localhost
npx hardhat run scripts/grant_roles.js --network localhost
```

### λ°μ΄ν„°λ² μ΄μ¤ μ΄κΈ°ν™”

SQLite λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ΄κΈ°ν™”ν•λ ¤λ©΄:

```bash
cd backend
rm ticketing.db  # λλ” λ‹¤λ¥Έ λ°μ΄ν„°λ² μ΄μ¤ νμΌ
# μ„λ²„ μ¬μ‹μ‘ μ‹ μλ™μΌλ΅ μƒμ„±λ¨
```

## κ°λ³„ API ν…μ¤νΈ

### cURLμ„ μ‚¬μ©ν• ν…μ¤νΈ

#### 1. μ‚¬μ©μ λ“±λ΅

```bash
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "test123",
    "role": "buyer"
  }'
```

#### 2. λ΅κ·ΈμΈ

```bash
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "test123"
  }'
```

μ‘λ‹µμ—μ„ `access_token`μ„ λ°›μ•„μ„ λ‹¤μ μ”μ²­μ— μ‚¬μ©ν•©λ‹λ‹¤.

#### 3. μ§€κ°‘ μ—°κ²°

```bash
TOKEN="μ—¬κΈ°μ—_λ°›μ€_ν† ν°_μ…λ ¥"

curl -X POST http://localhost:8000/api/v1/auth/wallet/connect \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "wallet_address": "0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"
  }'
```

#### 4. μ΄λ²¤νΈ μƒμ„± (μ£Όμµμ)

```bash
curl -X POST http://localhost:8000/api/v1/events \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "name": "Test Concert",
    "description": "This is a test event",
    "price_wei": 1000000000000000000,
    "max_tickets": 100,
    "start_time": "2025-12-02T00:00:00",
    "end_time": "2025-12-03T00:00:00",
    "event_date": "2025-12-08T00:00:00"
  }'
```

#### 5. μ΄λ²¤νΈ λ©λ΅ μ΅°ν

```bash
curl -X GET http://localhost:8000/api/v1/events
```

#### 6. ν‹°μΌ“ κµ¬λ§¤

```bash
EVENT_ID="μ—¬κΈ°μ—_μ΄λ²¤νΈ_ID_μ…λ ¥"

curl -X POST http://localhost:8000/api/v1/tickets/purchase \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "event_id": "'$EVENT_ID'"
  }'
```

## λΈλΌμ°μ €μ—μ„ ν…μ¤νΈ

### Swagger UI μ‚¬μ©

λ°±μ—”λ“ μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΌ λ• λΈλΌμ°μ €μ—μ„ λ‹¤μ URLμ„ μ—΄λ©΄ API λ¬Έμ„μ™€ ν…μ¤νΈ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤:

```
http://localhost:8000/docs
```

μ—¬κΈ°μ„:
- λ¨λ“  API μ—”λ“ν¬μΈνΈλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤
- κ° μ—”λ“ν¬μΈνΈλ¥Ό μ§μ ‘ ν…μ¤νΈν•  μ μμµλ‹λ‹¤
- μΈμ¦ ν† ν°μ„ μ…λ ¥ν•μ—¬ λ³΄νΈλ μ—”λ“ν¬μΈνΈλ¥Ό ν…μ¤νΈν•  μ μμµλ‹λ‹¤

### μ‚¬μ© λ°©λ²•

1. λΈλΌμ°μ €μ—μ„ `http://localhost:8000/docs` μ—΄κΈ°
2. `/api/v1/auth/register` μ—”λ“ν¬μΈνΈ μ°ΎκΈ°
3. "Try it out" λ²„νΌ ν΄λ¦­
4. μ”μ²­ λ³Έλ¬Έ μ…λ ¥
5. "Execute" λ²„νΌ ν΄λ¦­
6. μ‘λ‹µ ν™•μΈ
7. μ‘λ‹µμ—μ„ λ°›μ€ ν† ν°μ„ λ³µμ‚¬
8. νμ΄μ§€ μƒλ‹¨μ "Authorize" λ²„νΌ ν΄λ¦­
9. ν† ν° μ…λ ¥ (ν•μ‹: `Bearer <ν† ν°>`)
10. λ‹¤λ¥Έ λ³΄νΈλ μ—”λ“ν¬μΈνΈ ν…μ¤νΈ

## ν”„λ΅ νΈμ—”λ“μ—μ„ ν…μ¤νΈ

ν”„λ΅ νΈμ—”λ“κ°€ κµ¬ν„λμ–΄ μλ‹¤λ©΄:

```bash
cd frontend
npm install
npm start
```

λΈλΌμ°μ €μ—μ„ `http://localhost:3000` (λλ” λ‹¤λ¥Έ ν¬νΈ)λ΅ μ ‘μ†ν•μ—¬ UIλ¥Ό ν†µν•΄ ν…μ¤νΈν•  μ μμµλ‹λ‹¤.

## λ΅κ·Έ ν™•μΈ

### λ°±μ—”λ“ λ΅κ·Έ

λ°±μ—”λ“ μ„λ²„λ¥Ό μ‹¤ν–‰ν• ν„°λ―Έλ„μ—μ„ μ‹¤μ‹κ°„ λ΅κ·Έλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

### Hardhat λ…Έλ“ λ΅κ·Έ

Hardhat λ…Έλ“λ¥Ό μ‹¤ν–‰ν• ν„°λ―Έλ„μ—μ„ λΈ”λ΅μ²΄μΈ νΈλμ­μ… λ΅κ·Έλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

## λ‹¤μ λ‹¨κ³„

ν†µν•© ν…μ¤νΈκ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λλ©΄:

1. ν”„λ΅ νΈμ—”λ“μ™€ λ°±μ—”λ“ ν†µν•© ν…μ¤νΈ
2. ν…μ¤νΈλ„· λ°°ν¬ λ° ν…μ¤νΈ
3. λ©”μΈλ„· λ°°ν¬ μ¤€λΉ„

